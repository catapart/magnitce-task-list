var p=`:host\r
{\r
    --border-color: rgb(95, 95, 95);\r
    display: inline-block;\r
    border: solid 1px var(--border-color);\r
    border-radius: 3px;\r
    padding: .5em;\r
}\r
@media (prefers-color-scheme: dark) \r
{\r
    :host\r
    {\r
        --border-color: rgb(71, 71, 71);\r
    }\r
}\r
\r
\r
[part="header"]\r
{\r
    display: grid;\r
    grid-template-columns: auto minmax(0, 1fr) auto;\r
    align-items: center;\r
    position: sticky;\r
}\r
\r
[part="color-container"]\r
{\r
    display: contents;\r
}\r
\r
[part="color"]\r
{\r
    padding: 0;\r
    width: 12px;\r
    min-height: 0;\r
    height: auto;\r
    border: solid 1px transparent;\r
    align-self: stretch;\r
}\r
[part="color"]::-moz-color-swatch \r
{\r
    border: none;\r
    padding: 0;\r
    margin: 0;\r
}\r
\r
[part="color"]::-webkit-color-swatch-wrapper \r
{\r
    padding: 0;\r
    margin: 0;\r
}\r
\r
[part="color"]::-webkit-color-swatch \r
{\r
    border: none;\r
    padding: 0;\r
    margin: 0;\r
}\r
\r
[part="tasks"]\r
{\r
    list-style: none;\r
    margin: 0;\r
    padding: 0;\r
    display: flex;\r
    flex-direction: column;\r
}\r
\r
[part="add-button"]\r
{\r
    margin-top: 1rem;\r
    margin-inline: auto;\r
    min-width: 100px;\r
    align-self: center;\r
    display: flex;\r
    align-items: center;\r
    justify-content: center;\r
    gap: 5px;\r
}\r
\r
:host([collapsed]) > [part="tasks"]\r
{\r
    overflow: hidden;\r
    height: min-content;\r
    height: 0;\r
    opacity: 0;\r
    white-space: nowrap;\r
    padding: 0;\r
    margin: 0;\r
    border: none;\r
    pointer-events: none;\r
    user-select: none;\r
}\r
\r
::slotted([data-drag-id])\r
{\r
    opacity: .7;\r
    scale: .97;\r
    transition: opacity 100ms ease, scale 100ms ease;\r
}\r
\r
::slotted(task-list)\r
{\r
    margin-block: 7px;\r
}`;var h=`<slot name="header">\r
    <header part="header">\r
        <label part="color-container" title="Color">\r
            <input type="color" part="color" value="#919191" />\r
        </label>\r
        <input type="text" part="name" placeholder="List Name" />\r
        <button type="button" part="collapse-button" title="Collapse">\r
            <span part="collapse-icon">\u25B2</span>\r
        </button>\r
    </header>\r
</slot>\r
<ul part="tasks">\r
    <slot></slot>\r
</ul>\r
<slot name="add-button"><button type="button" part="add-button" title="Add">\r
    <span part="add-icon">&plus;</span>\r
    <span part="add-label">Add Task</span>\r
</button></slot>\r
<slot name="footer"></slot>`;var g=new CSSStyleSheet;g.replaceSync(p);var E=(s=>(s.Change="change",s.Add="add",s.Added="added",s.Removed="removed",s.Nested="nested",s.Collapse="collapse",s))(E||{}),d="task-list",l=class extends HTMLElement{TASKCARD_TAG_NAME="task-card";dragAndDropQueryParent;parentScopeSelector="";componentParts=new Map;getPart(e){if(this.componentParts.get(e)==null){let t=this.shadowRoot.querySelector(`[part="${e}"]`);t!=null&&this.componentParts.set(e,t)}return this.componentParts.get(e)}findPart(e){return this.shadowRoot.querySelector(`[part="${e}"]`)}handledItems=new WeakSet;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=h,this.shadowRoot.adoptedStyleSheets.push(g),this.dragAndDropQueryParent=this.getRootNode(),this.findPart("name").addEventListener("change",e=>{this.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0,detail:{target:e.target}}))}),this.findPart("color").addEventListener("change",e=>{this.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0,detail:{target:e.target}}))}),this.findPart("collapse-button").addEventListener("click",()=>{this.toggleHidden()}),this.findPart("add-button").addEventListener("click",()=>{let e=this.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}`).length;this.dispatchEvent(new CustomEvent("add",{bubbles:!0,cancelable:!0,detail:{order:e}}))}),this.getAttribute("drag-drop")!=null&&this.#e(),this.shadowRoot.querySelector("slot:not([name])").addEventListener("slotchange",e=>{let t=e.target.assignedElements();for(let a=0;a<t.length;a++)this.handledItems.has(t[a])||(t[a].tagName.toLowerCase()==d.toLowerCase()&&(this.dispatchEvent(new CustomEvent("nested",{bubbles:!0,cancelable:!0,detail:{target:t[a]}})),this.handledItems.add(t[a])),t[a].tagName.toLowerCase()==this.TASKCARD_TAG_NAME.toLowerCase()&&this.handledItems.add(t[a]),this.getAttribute("drag-drop")!=null&&this.applyDragAndDropCardHandler(t[a]))})}toggleHidden(){this.getAttribute("collapsed")==null?this.hide():this.show()}hide(){this.findPart("collapse-icon").textContent="\u25BC",this.setAttribute("collapsed",""),this.dispatchEvent(new CustomEvent("collapse",{bubbles:!0,cancelable:!0}))}show(){this.findPart("collapse-icon").textContent="\u25B2",this.removeAttribute("collapsed"),this.dispatchEvent(new CustomEvent("collapse",{bubbles:!0,cancelable:!0}))}static observedAttributes=["name","description","color","collapsed","drag-drop"];attributeChangedCallback(e,t,a){e=="name"?this.findPart("name").value=a:e=="description"?this.findPart("header").title=a:e=="color"?this.findPart("color").value=a:e=="collapsed"?a==="true"?this.classList.add("collapsed"):this.classList.remove("collapsed"):e=="drag-drop"&&t==null&&this.#e()}#e(){this.addEventListener("dragover",t=>{t.preventDefault(),t.stopPropagation(),t.dataTransfer.effectAllowed="move";let r=[...this.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}:not([data-drag-id])`)].reduce((s,o)=>{let c=o.getBoundingClientRect(),i=t.clientY-c.top-c.height/2;return i<0&&i>s.offset?{offset:i,task:o}:s},{offset:Number.NEGATIVE_INFINITY,task:void 0}).task,n=this.dragAndDropQueryParent.querySelector(`${this.parentScopeSelector}${this.TASKCARD_TAG_NAME}[data-drag-id]`);n==null||n.parentElement==this&&r==n.nextElementSibling||(r==null||this.getAttribute("collapsed")!=null?this.append(n):this.insertBefore(n,r))}),this.addEventListener("drop",t=>(t.preventDefault(),t.stopPropagation(),!1));let e=[...this.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}`)];for(let t=0;t<e.length;t++)this.applyDragAndDropCardHandler(e[t])}applyDragAndDropCardHandler(e){e.setAttribute("draggable","true"),e.addEventListener("dragstart",this.#t.item_onDragStart),e.addEventListener("dragend",this.#t.item_onDragEnd)}#a(e){let t=e.currentTarget,a=this.#n(),n=[...this.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}`)].indexOf(t);t.dataset.dragId=a,t.dataset.order=n.toString(),t.previousParent=this}#n(){return Math.floor(Math.random()*1e3).toString()}#r(e){e.preventDefault();let t=e.currentTarget,a=parseInt(t.dataset.order??""),r=t.previousParent,n=t.parentElement,o=[...n.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}`)].indexOf(t);r!=n?(n.applyDragAndDropCardHandler(t),n.handledItems.add(t),n.dispatchEvent(new CustomEvent("added",{bubbles:!0,detail:{order:o,target:t}})),t.removeEventListener("dragstart",r.#t.item_onDragStart),t.removeEventListener("dragend",r.#t.item_onDragEnd),r.handledItems.delete(t),r.dispatchEvent(new CustomEvent("removed",{bubbles:!0,detail:{order:a,target:t}}))):n.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{order:o,previousOrder:a,target:t}})),delete t.dataset.dragId,delete t.dataset.order,delete t.previousParent}#t={item_onDragStart:this.#a.bind(this),item_onDragEnd:this.#r.bind(this)}};customElements.get(d)==null&&customElements.define(d,l);export{d as COMPONENT_TAG_NAME,l as TaskListElement,E as TaskListEvents};
