var c=`:host\r
{\r
    --border-color: rgb(95, 95, 95);\r
    display: inline-block;\r
    border: solid 1px var(--border-color);\r
    border-radius: 3px;\r
    padding: .5em;\r
}\r
@media (prefers-color-scheme: dark) \r
{\r
    :host\r
    {\r
        --border-color: rgb(71, 71, 71);\r
    }\r
}\r
\r
\r
[part="header"]\r
{\r
    display: grid;\r
    grid-template-columns: auto minmax(0, 1fr) auto;\r
    align-items: center;\r
    position: sticky;\r
}\r
\r
[part="color-container"]\r
{\r
    display: contents;\r
}\r
\r
[part="color"]\r
{\r
    padding: 0;\r
    width: 12px;\r
    min-height: 0;\r
    height: auto;\r
    border: solid 1px transparent;\r
    align-self: stretch;\r
}\r
[part="color"]::-moz-color-swatch \r
{\r
    border: none;\r
    padding: 0;\r
    margin: 0;\r
}\r
\r
[part="color"]::-webkit-color-swatch-wrapper \r
{\r
    padding: 0;\r
    margin: 0;\r
}\r
\r
[part="color"]::-webkit-color-swatch \r
{\r
    border: none;\r
    padding: 0;\r
    margin: 0;\r
}\r
\r
[part="tasks"]\r
{\r
    list-style: none;\r
    margin: 0;\r
    padding: 0;\r
    display: flex;\r
    flex-direction: column;\r
}\r
\r
[part="add-button"]\r
{\r
    margin-top: 1rem;\r
    margin-inline: auto;\r
    min-width: 100px;\r
    align-self: center;\r
    display: flex;\r
    align-items: center;\r
    justify-content: center;\r
    gap: 5px;\r
}\r
\r
:host([collapsed]) > [part="tasks"]\r
{\r
    overflow: hidden;\r
    height: min-content;\r
    height: 0;\r
    opacity: 0;\r
    white-space: nowrap;\r
    padding: 0;\r
    margin: 0;\r
    border: none;\r
    pointer-events: none;\r
    user-select: none;\r
}\r
\r
::slotted([data-drag-id])\r
{\r
    opacity: .7;\r
    scale: .97;\r
    transition: opacity 100ms ease, scale 100ms ease;\r
}\r
\r
::slotted(task-list)\r
{\r
    margin-block: 7px;\r
}`;var h=`<slot name="header">\r
    <header part="header">\r
        <label part="color-container" title="Color">\r
            <input type="color" part="color" value="#919191" />\r
        </label>\r
        <input type="text" part="name" placeholder="List Name" />\r
        <button type="button" part="collapse-button" title="Collapse">\r
            <span part="collapse-icon">\u25B2</span>\r
        </button>\r
    </header>\r
</slot>\r
<ul part="tasks">\r
    <slot></slot>\r
</ul>\r
<slot name="add-button"><button type="button" part="add-button" title="Add">\r
    <span part="add-icon">&plus;</span>\r
    <span part="add-label">Add Task</span>\r
</button></slot>\r
<slot name="footer"></slot>`;var g=new CSSStyleSheet;g.replaceSync(c);var E=(r=>(r.Change="change",r.Add="add",r.Added="added",r.Removed="removed",r.Nested="nested",r.Collapse="collapse",r))(E||{}),d="task-list",l=class extends HTMLElement{TASKCARD_TAG_NAME="task-card";dragAndDropQueryParent;parentScopeSelector="";componentParts=new Map;getPart(e){if(this.componentParts.get(e)==null){let t=this.shadowRoot.querySelector(`[part="${e}"]`);t!=null&&this.componentParts.set(e,t)}return this.componentParts.get(e)}findPart(e){return this.shadowRoot.querySelector(`[part="${e}"]`)}handledItems=new WeakSet;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=h,this.shadowRoot.adoptedStyleSheets.push(g),this.dragAndDropQueryParent=document.body,this.findPart("name").addEventListener("change",e=>{this.dispatchEvent(new CustomEvent("change",{detail:{target:e.target}}))}),this.findPart("color").addEventListener("change",e=>{this.dispatchEvent(new CustomEvent("change",{detail:{target:e.target}}))}),this.findPart("collapse-button").addEventListener("click",()=>{this.toggleHidden()}),this.findPart("add-button").addEventListener("click",()=>{let e=this.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}`).length;this.dispatchEvent(new CustomEvent("add",{bubbles:!0,detail:{order:e}}))}),this.getAttribute("drag-drop")!=null&&this.#e(),this.shadowRoot.querySelector("slot:not([name])").addEventListener("slotchange",e=>{let t=e.target.assignedElements();for(let n=0;n<t.length;n++)this.handledItems.has(t[n])||(t[n].tagName.toLowerCase()==d.toLowerCase()&&(this.dispatchEvent(new CustomEvent("nested",{bubbles:!0,detail:{target:t[n]}})),this.handledItems.add(t[n])),t[n].tagName.toLowerCase()==this.TASKCARD_TAG_NAME.toLowerCase()&&this.handledItems.add(t[n]))})}toggleHidden(){this.getAttribute("collapsed")==null?this.hide():this.show()}hide(){this.findPart("collapse-icon").textContent="\u25BC",this.setAttribute("collapsed",""),this.dispatchEvent(new CustomEvent("collapse"))}show(){this.findPart("collapse-icon").textContent="\u25B2",this.removeAttribute("collapsed"),this.dispatchEvent(new CustomEvent("collapse"))}static observedAttributes=["name","description","color","collapsed"];attributeChangedCallback(e,t,n){e=="name"?this.findPart("name").value=n:e=="description"?this.findPart("header").title=n:e=="color"?this.findPart("color").value=n:e=="collapsed"&&(n==="true"?this.classList.add("collapsed"):this.classList.remove("collapsed"))}#e(){this.addEventListener("dragover",t=>{t.preventDefault(),t.stopPropagation(),t.dataTransfer.effectAllowed="move";let s=[...this.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}:not([data-drag-id])`)].reduce((r,o)=>{let p=o.getBoundingClientRect(),i=t.clientY-p.top-p.height/2;return i<0&&i>r.offset?{offset:i,task:o}:r},{offset:Number.NEGATIVE_INFINITY,task:void 0}).task,a=this.dragAndDropQueryParent.querySelector(`${this.parentScopeSelector}${this.TASKCARD_TAG_NAME}[data-drag-id]`);a==null||a.parentElement==this&&s==a.nextElementSibling||(s==null||this.getAttribute("collapsed")!=null?this.append(a):this.insertBefore(a,s))}),this.addEventListener("drop",t=>(t.preventDefault(),t.stopPropagation(),!1));let e=[...this.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}`)];for(let t=0;t<e.length;t++)this.applyDragAndDropCardHandler(e[t])}applyDragAndDropCardHandler(e){e.setAttribute("draggable","true"),e.addEventListener("dragstart",this.#t.item_onDragStart),e.addEventListener("dragend",this.#t.item_onDragEnd)}#n(e){let t=e.currentTarget,n=this.#a(),a=[...this.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}`)].indexOf(t);t.dataset.dragId=n,t.dataset.order=a.toString(),t.previousParent=this}#a(){return Math.floor(Math.random()*1e3).toString()}#s(e){e.preventDefault();let t=e.currentTarget,n=parseInt(t.dataset.order??""),s=t.previousParent,a=t.parentElement,o=[...a.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}`)].indexOf(t);s!=a?(a.applyDragAndDropCardHandler(t),a.handledItems.add(t),a.dispatchEvent(new CustomEvent("added",{bubbles:!0,detail:{order:o,target:t}})),t.removeEventListener("dragstart",s.#t.item_onDragStart),t.removeEventListener("dragend",s.#t.item_onDragEnd),s.handledItems.delete(t),s.dispatchEvent(new CustomEvent("removed",{bubbles:!0,detail:{order:n,target:t}}))):a.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{order:o,previousOrder:n,target:t}})),delete t.dataset.dragId,delete t.dataset.order,delete t.previousParent}#t={item_onDragStart:this.#n.bind(this),item_onDragEnd:this.#s.bind(this)}};customElements.get(d)==null&&customElements.define(d,l);export{d as COMPONENT_TAG_NAME,l as TaskListElement,E as TaskListEvents};
