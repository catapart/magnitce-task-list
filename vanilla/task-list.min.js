var c=`:host\r
{\r
    --border-color: rgb(95, 95, 95);\r
    display: inline-block;\r
    border: solid 1px var(--border-color);\r
    border-radius: 3px;\r
    padding: .5em;\r
}\r
@media (prefers-color-scheme: dark) \r
{\r
    :host\r
    {\r
        --border-color: rgb(71, 71, 71);\r
    }\r
}\r
\r
\r
[part="header"]\r
{\r
    display: grid;\r
    grid-template-columns: auto minmax(0, 1fr) auto;\r
    align-items: center;\r
    position: sticky;\r
}\r
\r
[part="color-container"]\r
{\r
    display: contents;\r
}\r
\r
[part="color"]\r
{\r
    padding: 0;\r
    width: 12px;\r
    min-height: 0;\r
    height: auto;\r
    border: solid 1px transparent;\r
    align-self: stretch;\r
}\r
[part="color"]::-moz-color-swatch \r
{\r
    border: none;\r
    padding: 0;\r
    margin: 0;\r
}\r
\r
[part="color"]::-webkit-color-swatch-wrapper \r
{\r
    padding: 0;\r
    margin: 0;\r
}\r
\r
[part="color"]::-webkit-color-swatch \r
{\r
    border: none;\r
    padding: 0;\r
    margin: 0;\r
}\r
\r
[part="tasks"]\r
{\r
    list-style: none;\r
    margin: 0;\r
    padding: 0;\r
    display: flex;\r
    flex-direction: column;\r
}\r
\r
[part="add-button"]\r
{\r
    margin-top: 1rem;\r
    margin-inline: auto;\r
    min-width: 100px;\r
    align-self: center;\r
    display: flex;\r
    align-items: center;\r
    justify-content: center;\r
    gap: 5px;\r
}\r
\r
:host([collapsed]) > [part="tasks"]\r
{\r
    overflow: hidden;\r
    height: min-content;\r
    height: 0;\r
    opacity: 0;\r
    white-space: nowrap;\r
    padding: 0;\r
    margin: 0;\r
    border: none;\r
    pointer-events: none;\r
    user-select: none;\r
}\r
\r
::slotted([data-drag-id])\r
{\r
    opacity: .7;\r
    scale: .97;\r
    transition: opacity 100ms ease, scale 100ms ease;\r
}\r
\r
::slotted(task-list)\r
{\r
    margin-block: 7px;\r
}`;var p=`<slot name="header">\r
    <header part="header">\r
        <label part="color-container" title="Color">\r
            <input type="color" part="color" value="#919191" />\r
        </label>\r
        <input type="text" part="name" placeholder="List Name" />\r
        <button type="button" part="collapse-button" title="Collapse">\r
            <span part="collapse-icon">\u25B2</span>\r
        </button>\r
    </header>\r
</slot>\r
<ul part="tasks">\r
    <slot></slot>\r
</ul>\r
<slot name="add-button"><button type="button" part="add-button" title="Add">\r
    <span part="add-icon">&plus;</span>\r
    <span part="add-label">Add Task</span>\r
</button></slot>\r
<slot name="footer"></slot>`;var h=new CSSStyleSheet;h.replaceSync(c);var m=(s=>(s.Change="change",s.Add="add",s.Added="added",s.Removed="removed",s.Nested="nested",s.Collapse="collapse",s))(m||{}),d="task-list",l=class extends HTMLElement{TASKCARD_TAG_NAME="task-card";dragAndDropQueryParent;parentScopeSelector="";componentParts=new Map;getPart(t){if(this.componentParts.get(t)==null){let e=this.shadowRoot.querySelector(`[part="${t}"]`);e!=null&&this.componentParts.set(t,e)}return this.componentParts.get(t)}findPart(t){return this.shadowRoot.querySelector(`[part="${t}"]`)}handledItems=new WeakSet;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=p,this.shadowRoot.adoptedStyleSheets.push(h),this.dragAndDropQueryParent=this.parentElement==null?this.getRootNode():this.parentElement.getRootNode(),this.findPart("name").addEventListener("change",t=>{this.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0,detail:{target:t.target}}))}),this.findPart("color").addEventListener("change",t=>{this.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0,detail:{target:t.target}}))}),this.findPart("collapse-button").addEventListener("click",()=>{this.toggleHidden()}),this.findPart("add-button").addEventListener("click",()=>{let t=this.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}`).length;this.dispatchEvent(new CustomEvent("add",{bubbles:!0,cancelable:!0,detail:{order:t}}))}),this.getAttribute("drag-drop")!=null&&this.#e(),this.shadowRoot.querySelector("slot:not([name])").addEventListener("slotchange",t=>{let e=t.target.assignedElements();for(let n=0;n<e.length;n++)this.handledItems.has(e[n])||(e[n].tagName.toLowerCase()==d.toLowerCase()&&(this.dispatchEvent(new CustomEvent("nested",{bubbles:!0,cancelable:!0,detail:{target:e[n]}})),this.handledItems.add(e[n])),e[n].tagName.toLowerCase()==this.TASKCARD_TAG_NAME.toLowerCase()&&e[n].dataset.dragId==null&&(this.handledItems.add(e[n]),this.getAttribute("drag-drop")!=null&&this.applyDragAndDropCardHandler(e[n])))})}toggleHidden(){this.getAttribute("collapsed")==null?this.hide():this.show()}hide(){this.findPart("collapse-icon").textContent="\u25BC",this.setAttribute("collapsed",""),this.dispatchEvent(new CustomEvent("collapse",{bubbles:!0,cancelable:!0}))}show(){this.findPart("collapse-icon").textContent="\u25B2",this.removeAttribute("collapsed"),this.dispatchEvent(new CustomEvent("collapse",{bubbles:!0,cancelable:!0}))}static observedAttributes=["name","description","color","collapsed","drag-drop"];attributeChangedCallback(t,e,n){t=="name"?this.findPart("name").value=n:t=="description"?this.findPart("header").title=n:t=="color"?this.findPart("color").value=n:t=="collapsed"?n==="true"?this.classList.add("collapsed"):this.classList.remove("collapsed"):t=="drag-drop"&&e==null&&this.#e()}#e(){this.addEventListener("dragover",t=>{t.preventDefault(),t.stopPropagation(),t.dataTransfer.effectAllowed="move";let n=[...this.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}:not([data-drag-id])`)].reduce((r,s)=>{let o=s.getBoundingClientRect(),i=t.clientY-o.top-o.height/2;return i<0&&i>r.offset?{offset:i,task:s}:r},{offset:Number.NEGATIVE_INFINITY,task:void 0}).task,a=this.dragAndDropQueryParent.querySelector(`${this.parentScopeSelector}${this.TASKCARD_TAG_NAME}[data-drag-id]`);a==null||a.parentElement==this&&n==a.nextElementSibling||(n==null||this.getAttribute("collapsed")!=null?this.append(a):this.insertBefore(a,n))}),this.addEventListener("drop",t=>(t.preventDefault(),t.stopPropagation(),!1))}applyDragAndDropCardHandler(t){t.setAttribute("draggable","true"),t.addEventListener("dragstart",this.#t.item_onDragStart),t.addEventListener("dragend",this.#t.item_onDragEnd)}#n(t){let e=t.currentTarget,n=this.#a(),r=[...this.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}`)].indexOf(e);e.dataset.dragId=n,e.dataset.order=r.toString(),e.dataset.listIndex=[...this.parentElement.children].indexOf(this).toString()}#a(){return Math.floor(Math.random()*1e3).toString()}#r(t){t.preventDefault(),t.stopPropagation();let e=t.currentTarget,n=parseInt(e.dataset.order??""),a=this.parentElement.children[parseInt(e.dataset.listIndex)],r=e.parentElement,o=[...r.querySelectorAll(`:scope > ${this.TASKCARD_TAG_NAME}`)].indexOf(e);a!=r?(r.applyDragAndDropCardHandler(e),r.handledItems.add(e),r.dispatchEvent(new CustomEvent("added",{bubbles:!0,detail:{order:o,target:e}})),e.removeEventListener("dragstart",a.#t.item_onDragStart),e.removeEventListener("dragend",a.#t.item_onDragEnd),a.handledItems.delete(e),a.dispatchEvent(new CustomEvent("removed",{bubbles:!0,detail:{order:n,target:e}}))):r.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{order:o,previousOrder:n,target:e}})),delete e.dataset.dragId,delete e.dataset.order,delete e.previousParent}#t={item_onDragStart:this.#n.bind(this),item_onDragEnd:this.#r.bind(this)}};customElements.get(d)==null&&customElements.define(d,l);export{d as COMPONENT_TAG_NAME,l as TaskListElement,m as TaskListEvents};
